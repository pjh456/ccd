# C Clone Detector 开发教程

**写在前面**：

这不仅仅是一份代码查重器的开发文档，更是一份 **C 语言工程化开发** 的实战指南。

我假设你刚刚结束大一 C 语言课程，会写 `Hello World`，会用 `for` 循环，但对指针、结构体、内存管理和多文件编译感到困惑。

本教程将“事无巨细”地填补从“课本知识”到“实际工程”之间的鸿沟。

---

## 课程目录导航

本教程共分为 **5 个模块**，请务必按顺序阅读。

### 第一模块：环境与 C 语言核心“补课”

> **目标**：在开始写第一行代码前，扫清 C 语言语法的最大障碍。

- **[环境搭建](01_setup_env.md)**
    - 抛弃 Dev-C++：安装 VSCode + GCC + CMake。
    - 什么是命令行？如何在终端编译程序？
- **[工程结构](02_project_layout.md)**
    - 代码不能全塞在 `main.c` 里。
    - 为什么要有 `include` 和 `src` 文件夹？
    - `CMakeLists.txt` 是干什么的？（无需死记硬背，提供模板）。
- **[结构体与类型定义](03_c_struct_typedef.md)**
    - **基础**：`struct` 到底存了什么？内存布局是怎样的？
    - **进阶**：为什么要用 `typedef`？(少写 `struct` 关键字)。
    - **实战**：设计一个 `Token` 结构体来练手。
- **[指针与堆内存](04_c_memory_pointers.md)**
    - **痛点**：栈 (Stack) 和 堆 (Heap) 的区别。
    - **核心**：`malloc`、`calloc`、`realloc` 和 `free` 的使用范式。
    - **常见的坑**：野指针、内存泄漏与段错误 (Segmentation Fault)。

### 第二模块：造轮子 —— 基础设施建设

> **目标**：C 语言标准库太简陋了，我们需要自己造一些好用的工具。

- **[动态数组：设计思路](05_vector_theory.md)**
    - 为什么数组 `int a[100]` 不够用？
    - 如何设计一个能“自动扩容”的容器？
    - `void*` 泛型指针：如何让一个 Vector 既能存 `int` 又能存 `struct`？
- **[动态数组：代码实现](06_vector_impl.md)**
    - 手把手实现 `vector_new`, `vector_push`, `vector_get`。
    - **难点解析**：`realloc` 扩容时的内存搬运逻辑。
- **[文件读取](07_file_io.md)**
    - 如何把一个 `.c` 文件一次性读入内存字符串？
    - `fopen`, `fseek`, `ftell`, `fread` 组合拳。

### 第三模块：教计算机“识字” (Tokenizer)

> **目标**：将源代码字符串切分成有意义的单词（Token）。

- **[词法分析原理](08_tokenizer_concept.md)**
    - 人类怎么看代码 vs 计算机怎么看代码。
    - **状态机 (FSM)**：从“读字符”到“读状态”的思维转变。
- **[定义 Token](09_enum_token_type.md)**
    - 使用 `enum` 枚举所有可能的 Token 类型 (关键字、符号、标识符)。
    - 完善 `Token` 结构体。
- **[扫描循环实现](10_tokenizer_loop.md)**
    - “光标”的概念：`peek()` (偷看) 和 `advance()` (前进)。
    - 主循环逻辑：吃掉空格 -> 识别数字 -> 识别字符 -> 报错。
- **[复杂 Token 处理](11_tokenizer_details.md)**
    - 处理字符串字面量 ` "hello world" `。
    - 处理双字符运算符（`+` vs `++` vs `+=`）。
    - 区分关键字 `int` 和变量名 `interval`。

### 第四模块：理解代码结构 (Parser & AST)

> **目标**：从“单词列表”构建出“语法树”。

- **[抽象语法树入门](12_ast_concept.md)**
    - 什么是树形结构？为什么代码是树？
    - 父节点与子节点的关系。
- **[设计 AST 节点](13_ast_struct_union.md)**
    - **高级 C 语法**：`union` (联合体) 的妙用。
    - 如何用一个 `struct ASTNode` 表达 `if`、`while`、`assign` 等几百种情况？
- **[递归下降解析](14_recursive_descent.md)**
    - 最直观的 Parser 写法。
    - 实战：解析简单的数学表达式 `a + b * c`。

### 第五模块：查重核心算法 (Algorithm)

> **目标**：将语法树转化为指纹并比较。

- **[归一化处理](15_normalization.md)**
    - 为什么 `int a = 1` 和 `int b = 1` 是一样的？
    - 遍历 AST 并重写节点内容。
- **[特征提取](16_ngrams_hashing.md)**
    - 什么是 N-Grams (N元语法)？
    - 滑动窗口算法实现。
    - 简单的字符串哈希函数 (FNV-1a)。
- **[MinHash 与相似度](17_minhash_sim.md)**
    - 降维打击：如何比较两个巨大的集合？
    - Jaccard 相似系数的计算。
- **[终章：命令行工具](18_cli_finish.md)**
    - 解析 `main(argc, argv)` 参数。
    - 串联所有模块：`Read -> Tokenize -> Parse -> Hash -> Report`。

---

## 给学习者的建议

1.  **不要跳过第一模块**：如果你对 `malloc` 有哪怕一点点不确定，请仔细阅读第 04 章。内存错误是 C 语言开发中最令人沮丧的 Bug。
2.  **手敲代码**：文档中会提供核心代码片段，但请务必自己手敲一遍，不要复制粘贴。
3.  **善用 Debug**：在 VSCode 中打断点，看变量在内存里是怎么变的，比看书管用一百倍。

---

### 下一步？

准备好你的编译器，点击 **[01. 环境搭建](01_setup_env.md)** 开始配置环境吧！